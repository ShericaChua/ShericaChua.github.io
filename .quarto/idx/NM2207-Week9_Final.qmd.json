{"title":"NM2207- Final Submission","markdown":{"yaml":{"title":"NM2207- Final Submission"},"headingText":"San Francisco's Changing Tree Landscape: A Decade of Growth and Diversity","containsRefs":false,"markdown":"\n\n\nHave you heard of **San Francisco Trees?!** Let **ME**.... **TELL YOU** more about it!\n\n## How has the tree population in San Francisco changed over the past decade?\n\n> According to studies on urban forestry and sustainability, the state of a city's tree population can significantly impact the environment, air quality, and overall well-being of its residents. For instance, research by the United Nations has shown that urban green spaces, including trees, are vital for mitigating climate change. This question is important because understanding how San Francisco's tree population has evolved is crucial for assessing the city's progress in environmental sustainability and urban planning, which has wide-reaching effects on residents' quality of life.\n\n## Findings about San Francisco Trees\n\n```{r, eval=TRUE,echo=FALSE,warning=FALSE,message=FALSE,include=FALSE}\n\nlibrary(tidyverse)\nlibrary(ggmap)\nlibrary(osmdata)\nlibrary(extrafont)\nlibrary(sf)\nlibrary(lubridate)\nlibrary(viridis)\nlibrary(patchwork)\nlibrary(ggtext)\n\nloadfonts(device = \"win\")\n\nsf_trees <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-28/sf_trees.csv')\n\nroads <- getbb(\"San Francisco\") %>% \n  opq() %>% \n  add_osm_feature(\"highway\") %>% \n  osmdata_sf()\n\ncoast <- getbb(\"San Francisco\") %>% \n  opq() %>% \n  add_osm_feature(key = \"natural\", value = \"coastline\") %>%\n  osmdata_sf()\n\nsf_trees %>%\n  summarise(nb_species = length(unique(species)))\n\n# Vector of years to fill the gap in the dataset\n\nyears <- tibble(year = seq(1954,2019,1), nb = 0)\n\n# Number of different species per year\n\np1 <- sf_trees %>%\n  mutate(year = year(date)) %>%\n  filter(year != 2020) %>%\n  group_by(year) %>%\n  summarise(nb_species = length(unique(species))) %>%\n  right_join(years) %>%\n  mutate(nb_species = ifelse(is.na(nb_species), 0, nb_species)) %>% \n  ggplot(aes(year, nb_species)) +\n  geom_col(fill = \"#6DD19C\", color = \"#effdee\", size = 1) +\n  scale_x_continuous(limits=c(1955,2020))+\n  labs(title= \"Number of different specie planted each year\",\n       y = \"# different specie\") +\n  theme(panel.background = element_rect(fill = \"white\"),\n        plot.background = element_rect(fill = \"white\", color = NA),\n        legend.background = element_rect(fill = \"white\"),\n        plot.title = element_text(color = \"#555555\", hjust = 0.5),\n        panel.grid.major =  element_line(color = \"#555555\", linetype = \"dashed\"),\n        panel.grid.minor =  element_line(color = \"#555555\", linetype = \"dotted\"),\n        axis.text = element_text(color = \"#555555\"),\n        axis.title = element_text(color = \"#555555\"),\n        axis.title.x = element_blank())\n\n\n# Number of trees planted each year\n\np2 <- sf_trees %>%\n  mutate(year = year(date)) %>%\n  filter(year != 2020 ) %>%\n  filter(!is.na(year)) %>%\n  group_by(year) %>%\n  summarise(nb_trees = n()) %>% \n  right_join(years) %>%\n  mutate(nb_trees = ifelse(is.na(nb_trees), 0, nb_trees)) %>%\n  ggplot(aes(year, nb_trees)) +\n  geom_line(color = \"#6DD19C\", size = 1) +\n  scale_x_continuous(limits=c(1955,2020))+\n  labs(title= \"Number of trees planted each year\",\n       y = \"number of trees\") +\n  theme(panel.background = element_rect(fill = \"white\"),\n        plot.background = element_rect(fill = \"white\", color = NA),\n        legend.background = element_rect(fill = \"white\"),\n        plot.title = element_text(color = \"#555555\", hjust = 0.5),\n        panel.grid.major =  element_line(color = \"#555555\", linetype = \"dashed\"),\n        panel.grid.minor =  element_line(color = \"#555555\", linetype = \"dotted\"),\n        axis.text = element_text(color = \"#555555\"),\n        axis.title = element_text(color = \"#555555\"),\n        axis.title.x = element_blank())\n\n\npatchwork <- ( p1 | p2 )\n\npatchwork + plot_annotation(title = \"Evolution of the number of trees & species\",\n                            theme = theme(plot.background = element_rect(fill = \"white\"),\n                                        plot.title = element_text(color = \"#555555\", size = 18, hjust = 0.5),\n                                        plot.subtitle = element_text(color = \"#555555\", size = 14, hjust = 0.5),\n                                        plot.caption = element_text(color = \"#555555\", hjust = 1),\n                                        panel.background = element_rect(fill = \"white\")))+\n            plot_layout(nrow = 2, heights = c(5, 5))\n\n\n```\n\n> The number of trees planted in San Francisco kept increasing from the [70's]{style=\"color:#feb24c\"} to the end of the [90's]{style=\"color:#feb24c\"}. This period showed an increase of the number of different species planted each year, with less than [50]{style=\"color:#00d400\"} to about [150]{style=\"color:#00d400\"}, with the maximum of [173 different species]{style=\"color:#00d400\"} in [2008]{style=\"color:#feb24c\"}, and [4388 trees planted]{style=\"color:#00d400\"}. The top graph shows the evolution of the number of species planted each year, while the bottom one shows the evolution of the number of trees planted each year.\n\n```{r, eval=TRUE,echo=FALSE,warning=FALSE,message=FALSE,include=FALSE}\nlibrary(tidyverse)\nlibrary(sf)\n\ntheme_set(theme_light())\n\nsf_trees_raw <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-28/sf_trees.csv')\n\nsf_trees <- sf_trees_raw %>%\n  # 1. Remove outliers\n  filter(longitude > -130,\n         between(latitude, 37.6, 40)) %>%\n  # 2. Make missing values explicit\n  mutate(species = ifelse(species %in% c(\"Tree(s) ::\", \"::\"), NA_character_, species)) %>%\n  # 3. Separate species into scientific and common names\n  separate(species,\n           into = c(\"science_name\", \"common_name\"),\n           sep = \"::\") %>%\n  # Get rid of whitespace that occurs after separation\n  mutate_at(vars(science_name, common_name), str_squish) %>%\n  # 4. Use scientific name for missing common names\n  mutate(common_name = ifelse(common_name == \"\", science_name, common_name))\n\n# 1. Create a temp directory and download ZIP file from US Census\ntemp_download <- tempfile()\ndownload.file(\"https://www2.census.gov/geo/tiger/TIGER2017//ROADS/tl_2017_06075_roads.zip\", temp_download)\n\n# 2. Create a temp directory to unzip the file into\ntemp_unzip <- tempfile()\nunzip(temp_download, exdir = temp_unzip)\n\n# 3. Read the unzipped shapefile from the temporary filepath\nsf_roads <- read_sf(paste0(file.path(temp_unzip), \"/tl_2017_06075_roads.shp\"))\n\nsf_trees %>%\n  mutate(\n    common_name = ifelse(\n      common_name == \"Indian Laurel Fig Tree 'Green Gem'\",\n      \"Indian Laurel Fig\",\n      common_name\n    ),\n    common_name = fct_lump(common_name, 9)\n  ) %>%\n  filter(!is.na(common_name), common_name != \"Other\") %>%\n  add_count(common_name, name = \"tree_count\") %>%\n  mutate(common_name = fct_reorder(common_name,-tree_count)) %>%\n  ggplot() +\n  geom_sf(data = sf_roads, col = \"grey90\", alpha = 0.5) +\n  geom_point(\n    aes(longitude, latitude),\n    shape = \".\",\n    alpha = 0.5,\n    col = \"#6DD19C\"\n  ) +\n  facet_wrap( ~ common_name) +\n  coord_sf() +\n  labs(title = \"The nine most common tree species\") +\n  theme_void() +\n  theme(\n    plot.subtitle = element_text(margin = margin(b = 4, unit = \"pt\")),\n    strip.text = element_text(size = 8, margin = margin(\n      t = 2, b = 2, unit = \"pt\"\n    ))\n  )\n\ndev.new(width=10, height=5, unit=\"in\")\nplot\n\n```\n\n> Analyzing the most common tree species in San Francisco can provide insights into the health, resilience, and management of the urban forest, informing decisions on future planting initiatives and conservation efforts.\n\n<iframe height=\"400\" width=\"100%\" frameborder=\"no\" src=\"https://18en4g-chua-chua.shinyapps.io/interactivegraph/\">\n\n</iframe>\n","srcMarkdownNoYaml":"\n\n# San Francisco's Changing Tree Landscape: A Decade of Growth and Diversity\n\nHave you heard of **San Francisco Trees?!** Let **ME**.... **TELL YOU** more about it!\n\n## How has the tree population in San Francisco changed over the past decade?\n\n> According to studies on urban forestry and sustainability, the state of a city's tree population can significantly impact the environment, air quality, and overall well-being of its residents. For instance, research by the United Nations has shown that urban green spaces, including trees, are vital for mitigating climate change. This question is important because understanding how San Francisco's tree population has evolved is crucial for assessing the city's progress in environmental sustainability and urban planning, which has wide-reaching effects on residents' quality of life.\n\n## Findings about San Francisco Trees\n\n```{r, eval=TRUE,echo=FALSE,warning=FALSE,message=FALSE,include=FALSE}\n\nlibrary(tidyverse)\nlibrary(ggmap)\nlibrary(osmdata)\nlibrary(extrafont)\nlibrary(sf)\nlibrary(lubridate)\nlibrary(viridis)\nlibrary(patchwork)\nlibrary(ggtext)\n\nloadfonts(device = \"win\")\n\nsf_trees <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-28/sf_trees.csv')\n\nroads <- getbb(\"San Francisco\") %>% \n  opq() %>% \n  add_osm_feature(\"highway\") %>% \n  osmdata_sf()\n\ncoast <- getbb(\"San Francisco\") %>% \n  opq() %>% \n  add_osm_feature(key = \"natural\", value = \"coastline\") %>%\n  osmdata_sf()\n\nsf_trees %>%\n  summarise(nb_species = length(unique(species)))\n\n# Vector of years to fill the gap in the dataset\n\nyears <- tibble(year = seq(1954,2019,1), nb = 0)\n\n# Number of different species per year\n\np1 <- sf_trees %>%\n  mutate(year = year(date)) %>%\n  filter(year != 2020) %>%\n  group_by(year) %>%\n  summarise(nb_species = length(unique(species))) %>%\n  right_join(years) %>%\n  mutate(nb_species = ifelse(is.na(nb_species), 0, nb_species)) %>% \n  ggplot(aes(year, nb_species)) +\n  geom_col(fill = \"#6DD19C\", color = \"#effdee\", size = 1) +\n  scale_x_continuous(limits=c(1955,2020))+\n  labs(title= \"Number of different specie planted each year\",\n       y = \"# different specie\") +\n  theme(panel.background = element_rect(fill = \"white\"),\n        plot.background = element_rect(fill = \"white\", color = NA),\n        legend.background = element_rect(fill = \"white\"),\n        plot.title = element_text(color = \"#555555\", hjust = 0.5),\n        panel.grid.major =  element_line(color = \"#555555\", linetype = \"dashed\"),\n        panel.grid.minor =  element_line(color = \"#555555\", linetype = \"dotted\"),\n        axis.text = element_text(color = \"#555555\"),\n        axis.title = element_text(color = \"#555555\"),\n        axis.title.x = element_blank())\n\n\n# Number of trees planted each year\n\np2 <- sf_trees %>%\n  mutate(year = year(date)) %>%\n  filter(year != 2020 ) %>%\n  filter(!is.na(year)) %>%\n  group_by(year) %>%\n  summarise(nb_trees = n()) %>% \n  right_join(years) %>%\n  mutate(nb_trees = ifelse(is.na(nb_trees), 0, nb_trees)) %>%\n  ggplot(aes(year, nb_trees)) +\n  geom_line(color = \"#6DD19C\", size = 1) +\n  scale_x_continuous(limits=c(1955,2020))+\n  labs(title= \"Number of trees planted each year\",\n       y = \"number of trees\") +\n  theme(panel.background = element_rect(fill = \"white\"),\n        plot.background = element_rect(fill = \"white\", color = NA),\n        legend.background = element_rect(fill = \"white\"),\n        plot.title = element_text(color = \"#555555\", hjust = 0.5),\n        panel.grid.major =  element_line(color = \"#555555\", linetype = \"dashed\"),\n        panel.grid.minor =  element_line(color = \"#555555\", linetype = \"dotted\"),\n        axis.text = element_text(color = \"#555555\"),\n        axis.title = element_text(color = \"#555555\"),\n        axis.title.x = element_blank())\n\n\npatchwork <- ( p1 | p2 )\n\npatchwork + plot_annotation(title = \"Evolution of the number of trees & species\",\n                            theme = theme(plot.background = element_rect(fill = \"white\"),\n                                        plot.title = element_text(color = \"#555555\", size = 18, hjust = 0.5),\n                                        plot.subtitle = element_text(color = \"#555555\", size = 14, hjust = 0.5),\n                                        plot.caption = element_text(color = \"#555555\", hjust = 1),\n                                        panel.background = element_rect(fill = \"white\")))+\n            plot_layout(nrow = 2, heights = c(5, 5))\n\n\n```\n\n> The number of trees planted in San Francisco kept increasing from the [70's]{style=\"color:#feb24c\"} to the end of the [90's]{style=\"color:#feb24c\"}. This period showed an increase of the number of different species planted each year, with less than [50]{style=\"color:#00d400\"} to about [150]{style=\"color:#00d400\"}, with the maximum of [173 different species]{style=\"color:#00d400\"} in [2008]{style=\"color:#feb24c\"}, and [4388 trees planted]{style=\"color:#00d400\"}. The top graph shows the evolution of the number of species planted each year, while the bottom one shows the evolution of the number of trees planted each year.\n\n```{r, eval=TRUE,echo=FALSE,warning=FALSE,message=FALSE,include=FALSE}\nlibrary(tidyverse)\nlibrary(sf)\n\ntheme_set(theme_light())\n\nsf_trees_raw <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-28/sf_trees.csv')\n\nsf_trees <- sf_trees_raw %>%\n  # 1. Remove outliers\n  filter(longitude > -130,\n         between(latitude, 37.6, 40)) %>%\n  # 2. Make missing values explicit\n  mutate(species = ifelse(species %in% c(\"Tree(s) ::\", \"::\"), NA_character_, species)) %>%\n  # 3. Separate species into scientific and common names\n  separate(species,\n           into = c(\"science_name\", \"common_name\"),\n           sep = \"::\") %>%\n  # Get rid of whitespace that occurs after separation\n  mutate_at(vars(science_name, common_name), str_squish) %>%\n  # 4. Use scientific name for missing common names\n  mutate(common_name = ifelse(common_name == \"\", science_name, common_name))\n\n# 1. Create a temp directory and download ZIP file from US Census\ntemp_download <- tempfile()\ndownload.file(\"https://www2.census.gov/geo/tiger/TIGER2017//ROADS/tl_2017_06075_roads.zip\", temp_download)\n\n# 2. Create a temp directory to unzip the file into\ntemp_unzip <- tempfile()\nunzip(temp_download, exdir = temp_unzip)\n\n# 3. Read the unzipped shapefile from the temporary filepath\nsf_roads <- read_sf(paste0(file.path(temp_unzip), \"/tl_2017_06075_roads.shp\"))\n\nsf_trees %>%\n  mutate(\n    common_name = ifelse(\n      common_name == \"Indian Laurel Fig Tree 'Green Gem'\",\n      \"Indian Laurel Fig\",\n      common_name\n    ),\n    common_name = fct_lump(common_name, 9)\n  ) %>%\n  filter(!is.na(common_name), common_name != \"Other\") %>%\n  add_count(common_name, name = \"tree_count\") %>%\n  mutate(common_name = fct_reorder(common_name,-tree_count)) %>%\n  ggplot() +\n  geom_sf(data = sf_roads, col = \"grey90\", alpha = 0.5) +\n  geom_point(\n    aes(longitude, latitude),\n    shape = \".\",\n    alpha = 0.5,\n    col = \"#6DD19C\"\n  ) +\n  facet_wrap( ~ common_name) +\n  coord_sf() +\n  labs(title = \"The nine most common tree species\") +\n  theme_void() +\n  theme(\n    plot.subtitle = element_text(margin = margin(b = 4, unit = \"pt\")),\n    strip.text = element_text(size = 8, margin = margin(\n      t = 2, b = 2, unit = \"pt\"\n    ))\n  )\n\ndev.new(width=10, height=5, unit=\"in\")\nplot\n\n```\n\n> Analyzing the most common tree species in San Francisco can provide insights into the health, resilience, and management of the urban forest, informing decisions on future planting initiatives and conservation efforts.\n\n<iframe height=\"400\" width=\"100%\" frameborder=\"no\" src=\"https://18en4g-chua-chua.shinyapps.io/interactivegraph/\">\n\n</iframe>\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"NM2207-Week9_Final.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","editor":"visual","theme":"minty","title":"NM2207- Final Submission"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}